(()=>{(function(){function u(t){if(!t||t.hasAttribute("data-initialized"))return;t.setAttribute("data-initialized","true");let s=t.querySelector("button.select-trigger");if(!s){console.error("Select box: Trigger button (.select-trigger) not found in wrapper",t);return}let r=s.dataset.contentId,c=r?document.getElementById(r):null,o=s.querySelector(".select-value"),i=s.querySelector('input[type="hidden"]');if(!c||!o||!i){console.error("Select box: Missing required elements for initialization.",{wrapper:t,contentID:r,contentExists:!!c,valueElExists:!!o,hiddenInputExists:!!i});return}let l=c.querySelector('.select-item[data-selected="true"]');if(l){let e=l.querySelector(".select-item-text");e&&(o.textContent=e.textContent,o.classList.remove("text-muted-foreground")),i&&(i.value=l.getAttribute("data-value")||"")}function x(){c.querySelectorAll(".select-item").forEach(e=>{e.getAttribute("data-selected")==="true"?(e.classList.add("bg-accent","text-accent-foreground"),e.classList.remove("bg-muted")):e.classList.remove("bg-accent","text-accent-foreground","bg-muted")})}function m(e){if(!e||e.getAttribute("data-disabled")==="true")return;let n=e.getAttribute("data-value"),a=e.querySelector(".select-item-text");c.querySelectorAll(".select-item").forEach(d=>{d.setAttribute("data-selected","false"),d.classList.remove("bg-accent","text-accent-foreground","bg-muted");let v=d.querySelector(".select-check");v&&v.classList.replace("opacity-100","opacity-0")}),e.setAttribute("data-selected","true"),e.classList.add("bg-accent","text-accent-foreground");let b=e.querySelector(".select-check");b&&b.classList.replace("opacity-0","opacity-100"),o&&a&&(o.textContent=a.textContent,o.classList.remove("text-muted-foreground")),i&&n!==null&&(i.value=n,i.dispatchEvent(new Event("change",{bubbles:!0}))),window.closePopover?window.closePopover(r,!0):console.warn("closePopover function not found")}c.addEventListener("click",e=>{let n=e.target.closest(".select-item");n&&m(n)}),c.addEventListener("keydown",e=>{let n=e.target.closest(".select-item");n&&(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),m(n))}),c.addEventListener("mouseover",e=>{let n=e.target.closest(".select-item");!n||n.getAttribute("data-disabled")==="true"||(c.querySelectorAll(".select-item").forEach(a=>{a.classList.remove("bg-accent","text-accent-foreground","bg-muted")}),n.getAttribute("data-selected")!=="true"&&n.classList.add("bg-accent","text-accent-foreground"))}),c.addEventListener("mouseleave",x)}function f(t=document){let s=t.querySelectorAll(".select-container:not([data-initialized])");t instanceof Element&&t.matches(".select-container")&&!t.hasAttribute("data-initialized")?u(t):s.forEach(u)}let g=t=>{let s=t.detail.target||t.detail.elt;s instanceof Element&&requestAnimationFrame(()=>f(s))};document.addEventListener("DOMContentLoaded",()=>f()),document.body.addEventListener("htmx:afterSwap",g),document.body.addEventListener("htmx:oobAfterSwap",g)})();})();
